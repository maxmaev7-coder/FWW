# FWW Builder — рабочий кодекс

Документ фиксирует требования заказчика к печати, экрану составления ростера и каталогу карт. Кратко:

## 1. PDF / печать

- Формат листа: **A4 landscape** с полями ~10 мм.
- Сетка: 5 карт в ряд. Вариант «большие» — 2 ряда (10 карт), «маленькие» — 4 ряда (20 карт).
- Порядок: персонаж → силовая броня → остальные карты в пользовательском порядке. Модификации располагаются под своим предметом.
- Полоски S.P.E.C.I.A.L.: карты брони/химии стыкуются справа от персонажа, чтобы вертикальные полосы совпадали.
- Карты не рвём между страницами (`break-inside: avoid`).
- Конвертация в PDF происходит на клиенте.

## 2. Рабочий лист (ростер)

- На экране раскладка аналогична печати: крупные карточки, блоки предмет+моды.
- Карта персонажа слева, силовая броня сразу рядом; остальные карты — сеткой.
- Под картами отображаются кнопки «Превью», «Добавить/Изменить мод», «Удалить», бейджи (x2, UNIQUE, LOCKED).
- Мод-карты показываются изображением под предметом, клик по картинке открывает превью.
- Drag-and-drop для перестановки порядка остальных карт.
- Верхние кнопки: «Сохранить», «Загрузить», «Печать / PDF», «Очистить». Размер ростера не ограничивается панелями.

## 3. Каталог карт (CardPicker)

- Клик по карточке добавляет её в ростер.
- Отдельная кнопка «Превью» под карточкой увеличивает изображение ×1.5 (лайтбокс).
- Добавлены быстрые фильтры: «С полосками», «Мод-карты», «Химия / алкоголь».
- Для мод-карт показ только справочный (чтобы добавить, используем кнопку «+ мод» у предмета).

## 4. Полоски S.P.E.C.I.A.L.

- Карта персонажа задаёт базовый референс.
- Карты силовой брони и химии примыкают справа и выравниваются визуально (сетка без зазора).
- В цифровом виде размеры карт неизменны; смысловое соседство подчёркивается расположением.

## 5. Компоненты / архитектура

- `Card` — базовая карта (персонаж, предмет).
- `Card.Mod` — мод-карта как дочерний блок.
- `RosterGrid` — единая сетка для live/PDF.
- `PdfRenderer` — печатные стили и разбиение на страницы.
- `CardPicker` — каталог с фильтрами и превью.
- `useRosterStore` — хранение порядка карт, связей «предмет → моды», состояния полосок.

## 6. Acceptance Criteria

1. Персонаж добавляется в левый верхний слот, силовая броня автоматически примыкает справа.
2. Предметы и моды отображаются как единый визуальный блок.
3. Печать формирует A4 landscape, 5 карт в ряд, без разрывов.
4. В каталоге клик добавляет карту, кнопка «лупа» открывает превью.
5. В блоке «Остальные карты» работает перетаскивание.

## 7. Тест-чеклист

- Проверка PDF на 1, 2 и 3+ страницах (поля, переносы, порядок).
- Стык полосок персонаж ↔ силовая броня/химия.
- Мод-карты видимы и кликабельны.
- Каталог добавляет по клику, превью отдельно.
- Кнопки под картами не перекрывают изображения.

## 8. Скриншоты

См. папку [`docs/screens`](./screens) — ссылки на изображения из переписки.
