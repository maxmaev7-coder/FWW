:root{
  /* тема */
  --bg:#0f1216; --panel:#171b22; --text:#e9eef5; --muted:#9fb2c5;
  --accent:#3a86ff; --danger:#ff5d5d; --chip:#1f2630; --border:#273040;

  /* размеры UI */
  --unit-img-w: 160px;      /* ширина превью юнита слева в карточке */
  --grid-min: 420px;        /* минимальная ширина карточки юнита в ростере */
}

@media (max-width: 1100px){
  :root{ --unit-img-w: 140px; --grid-min: 360px; }
}
@media (max-width: 760px){
  :root{ --unit-img-w: 120px; --grid-min: 320px; }
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,'DejaVu Sans',Arial;
}

.hidden{ display:none !important; }

/* ── Toolbar / controls ─────────────────────────────────────────────── */
.toolbar{
  position:sticky; top:0; z-index:50;
  background:linear-gradient(180deg,var(--panel),rgba(23,27,34,.9));
  backdrop-filter:saturate(1.2) blur(6px);
  border-bottom:1px solid var(--border);
  padding:.5rem 1rem;
}
.brand{ font-weight:700; margin-bottom:.25rem; }
.controls{ display:flex; flex-wrap:wrap; gap:.5rem; align-items:center; }
.input{
  background:#0c0f13; border:1px solid var(--border); color:var(--text);
  padding:.45rem .6rem; border-radius:.5rem; min-width:140px;
}
.input.number{ max-width:130px; }
.btn{
  background:var(--chip); border:1px solid var(--border); color:var(--text);
  padding:.45rem .7rem; border-radius:.5rem; cursor:pointer; transition:.15s;
}
.btn:hover{ border-color:#3a86ff44; box-shadow:0 0 0 2px #3a86ff22; }
.btn.small{ padding:.3rem .5rem; }
.btn.danger{ background:#2a1b1f; border-color:#563a40; color:#ffb3b3; }
.stats{ margin-top:.5rem; display:flex; gap:1rem; color:var(--muted); }

/* ── Roster / unit card ─────────────────────────────────────────────── */
.roster{ display:grid; grid-template-columns:repeat(auto-fill,minmax(var(--grid-min),1fr)); gap:1rem; padding:1rem; }
.unit{ background:var(--panel); border:1px solid var(--border); border-radius:12px; overflow:hidden; }
.unit-header{ display:flex; justify-content:space-between; gap:.5rem; padding:.75rem; border-bottom:1px solid var(--border); }
.unit-headline{ display:flex; gap:.75rem; }

.unit-img{
  width:var(--unit-img-w); height:calc(var(--unit-img-w)*4/3);
  object-fit:cover; border-radius:.5rem; border:1px solid var(--border); background:#000;
}
.unit-title .name{ font-weight:700; }
.unit-title .meta{ color:var(--muted); font-size:12px; margin-top:.15rem; }
.unit-actions{ display:flex; gap:.4rem; align-items:flex-start; }

.slots{ display:flex; flex-wrap:wrap; gap:.5rem; padding:.75rem; }
.subtotal{
  display:flex; gap:1rem; justify-content:flex-end;
  padding:.5rem .75rem; border-top:1px solid var(--border); color:var(--muted);
}

.item-chip{
  background:var(--chip); border:1px solid var(--border); border-radius:.75rem;
  padding:.6rem .75rem; display:flex; flex-direction:column; gap:.5rem;
}
.item-chip .item-main{ display:flex; align-items:center; gap:.65rem; }
.item-chip .icon{
  width:64px; height:64px; object-fit:contain; border-radius:.65rem; border:1px solid var(--border); background:#000;
}
.item-chip .info{ flex:1; }
.item-chip .label{ font-weight:600; margin-bottom:.2rem; }
.item-chip .price{ color:var(--muted); font-size:12px; }
.item-chip .actions{ display:flex; flex-direction:column; gap:.35rem; align-items:flex-end; }
.item-chip .remove{ border:0; background:transparent; color:#aab8c4; font-size:18px; cursor:pointer; }
.item-chip .remove:disabled{ opacity:.45; cursor:default; }
.item-chip .btn.tiny{ padding:.2rem .45rem; font-size:12px; }
.btn.tiny.secondary{ background:#1c2330; border-color:#2b3648; color:#9fb2c5; }
.mod-info{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; background:#111823; border-radius:.6rem; padding:.35rem .5rem; border:1px dashed #304157; }
.mod-label{ font-weight:600; font-size:13px; }
.mod-price{ color:var(--muted); font-size:12px; }

/* ── Modal / list grid ──────────────────────────────────────────────── */
.modal{ position:fixed; inset:0; display:grid; place-items:center; }
.modal.hidden{ display:none; }
.modal .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.5); }
.modal .panel{
  position:relative; background:var(--panel); border:1px solid var(--border); border-radius:14px;
  max-width:min(1220px,96vw); width:96vw; max-height:90vh; display:flex; flex-direction:column; overflow:hidden;
}
.panel-header{ display:flex; justify-content:space-between; align-items:center; padding:.75rem 1rem; border-bottom:1px solid var(--border); }
.title{ font-weight:700; }
.icon{ background:transparent; border:1px solid var(--border); color:var(--text); border-radius:.5rem; padding:.25rem .5rem; cursor:pointer; }

.filters{ position:sticky; top:0; display:flex; flex-direction:column; gap:.35rem; padding:.5rem; background:var(--panel); border-bottom:1px solid var(--border); }
.filter-row{ display:flex; flex-wrap:wrap; gap:.4rem; }
.filter-row.sub{ border-top:1px solid var(--border); padding-top:.4rem; }
.filter{ padding:.32rem .6rem; border:1px solid var(--border); border-radius:999px; background:#0c0f13; cursor:pointer; color:var(--text); font-size:13px; }
.filter.active{ outline:2px solid #3a86ff55; }

.grid{ padding:1rem; display:grid; gap:1rem; overflow:auto; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); }
.grid.picker-units{ grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); }
.grid.picker-items{ grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); }
.grid.picker-mods{ grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); }
.card{
  display:flex;
  flex-direction:column;
  gap:.6rem;
  background:var(--chip);
  border:1px solid var(--border);
  border-radius:14px;
  padding:.75rem;
  min-height:auto;
}
.card .card-body{ display:flex; flex-direction:column; gap:.25rem; flex:1; }
.card .title{ font-weight:700; font-size:16px; }
.card .meta{ color:var(--muted); font-size:12px; }
.card .take{ align-self:stretch; margin-top:auto; }
.thumb-large{ width:100%; aspect-ratio:3/4; object-fit:contain; border-radius:10px; border:1px solid var(--border); background:#000; }
.thumb-item{ width:100%; height:220px; object-fit:contain; border-radius:10px; border:1px solid var(--border); background:#000; }
.empty{ border:1px dashed var(--border); border-radius:12px; padding:1.5rem; text-align:center; color:var(--muted); }

.badge{
  display:inline-block; line-height:1; border:1px solid var(--border); border-radius:6px;
  padding:.1rem .35rem; font-size:11px; color:#ffd966; background:#3a2b15; margin-left:.4rem;
}
